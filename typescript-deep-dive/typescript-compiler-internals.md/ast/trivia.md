# 细节

细节（这么叫是因为它`travial`）表示源文字对于理解代码无关紧要的部分。比如，空白，评论，和冲突标记。细节没有存储在`AST`（保持轻量）。然而，他可以使用一些`ts.*`API在需要的时候获取。

在我们展示他们之前，你需要理解下面：

### 细节拥有者

通常：
- 一个词素拥有它之后相同行到下一行之前的任何细节
- 一行之后的任何评论都和后面的词素相关

对于一个文件开始和末尾的评论：

- 源文件的第一个词素获取所有的初始化细节
- 文件的最后一个序列的细节附加到文件终结词素，否则宽度为 0。

### API 细节

对于大部分基础使用，评论是非常“有趣”的细节。术语一个节点的评论可以通过下面的函数获取：

| 函数 | 描述 |
| --- | —--|
| `ts.getLeadingCommentRanges` | 给定源文字和文字中的位置，返回词素自身前面的的第一个换行符和词素之间的的评论的范围（和`ts.Node.getFullStart`一起使用最有用）|
| `ts.getTrailingCommentRanges` | 给定源文字和文字中的位置，返回给定位置到第一个换行符的范围（和`ts.Node.getEnd`一起用最好）。 |

作为一个例子，想象这个部分的源文件：
```ts
debugger;/*hello*/
    //bye
  /*hi*/    function
```

`getLeadingCommentRanges`对于`function`将只返回最后 2 个评论`//bye`和`/*hi*/`。

适当的，在 debugger 语句调用`getTrailingCommentRanges`将提取`/*hello*/`评论。

### 词素开始/完全开始

节点有一个叫做“词素开始”和一个“完全开始”的东西

- 词素开始：更自然的版本，是词素的文本在文件中开始的位置
- 完全开始：扫描器从上一个重要的词素开始扫描的点

AST 节点有一个 API，`getStart`和`getFullStart`。在下面的例子：
```ts
debugger;/*hello*/
    //bye
  /*hi*/    function
```
对于`function`，词素在`function`开始，完全开始是在`/*hello*/`。注意完全开始甚至包含细节，否则就会被前一个节点拥有。