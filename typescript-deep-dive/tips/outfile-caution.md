# 小心 outFile

对你来说使用这个是一个很坏的主意，因为下面的原因：

- 运行时错误
- 快速编译
- 全局范围
- 难以分析
- 难以伸缩
- `_reference`
- 代码重用
- 多目标
- 隔离编译


### 运行时错误

如果你的代码依赖任何形式的 js 顺序，你将得到随机的运行时错误。

- 类继承会在运行时破坏

假设`foo.ts`:
```ts
class Foo {

}
```
和一个`bar.ts`:
```ts
class Bar extends Foo {

}
```

如果你以正确的顺序编译失败，比如，可能字母表顺序的`tsc bar.ts foo.ts`代码可能编译成功，但是在运行是会静默失败，因为`bar`设置为`NaN`。

### 快速编译

如果你使用`--out`，单独的`.ts`文件不能不实用不需要的 hack 独立的被编码为单独的`.js`文件。`--out`建立强制缓慢增量打包。

当然源码映射是位置敏感的，并使用游长编码，因此大部分映射需要被编译在一个重新编译上，如果你使用源码映射（你应该）。在高-10s到100s 的时候，kloc 绑定会变慢，

### 全局范围

的确你剋使用命名空间，但是它依旧在`window`下，如果你运行在浏览器。命名空间只是一个不需要的变通方法。当然`/// <reference`评论在你的代码引入一个全局上下文，会变得更难调试。

当然，如果你的公司有都个团队独立工作，有人打算去尝试集成亮的独立编写的 app，名称冲突的可能很大。

### 难以分析

我们希望提供更多代码分析工具，如果你提供我们依赖链，这将会更简单（使用外部模块，这将隐式存在）。

当然并不是所有的开发工具都有一时间去理解代码。下一个维护者需要去理解大量的代码库，在他们开始理解什么东西被真实导入。使用内部模块当然让带啊更难独立去审阅，比如，在 github。

### 难以伸缩

实际上，只是随机运行时错误 + 越来越慢的编译时间 + 理解其他人的代码的结果。

### `_reference`

`tsconfig.json`不支持：
[https://github.com/Microsoft/TypeScript/issues/2472#issuecomment-85330803]()你需要手动排序`files`数组。

### 代码重用

如果你想要在其他项目重用你的代码，包括所有隐式依赖管理，很难传递它而没有潜在运行时错误。

### 多目标

当然，如果你决定在类似 nodejs（比如，测试 API）重用你的浏览器代码，你需要将它导入一个模块系统，或者使用难看的 hack 去让 nodejs 的`global`成为你的全局范围（比如，`window`）。

### 隔离编译

文件无法独立编译。比如，假设`a.ts`:
```ts
module M {
  var s = t;
}
```

将会有不同的输出，取决于`b.ts`是否是这种形式：
```ts
module M {
  export var t = 5;
}
```

或者：
```ts
var t = 5;
```
因此，`a.ts`[不能独立编译]()

### 总结

`--out`其实是某一些构建工具的工作。尽管这类构建工具可以从外部模块提供的依赖提及受益。因此我们推荐你使用外部模块，然后让构建工具为你创建单独的`.js`，如果你想要。

[https://twitter.com/nycdotnet/status/613705850574778368]()